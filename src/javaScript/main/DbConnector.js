connect to the JS

fix some bug

better connection routine
